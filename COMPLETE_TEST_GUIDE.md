# 🧪 v3.1 完整功能测试指南

**测试时间**: 2026-02-10
**版本**: v3.1-dev
**测试范围**: 所有新增功能

---

## 📋 测试清单

### Phase 1: 数据可视化功能 ✅

#### 1. 关键指标预警
**位置**: 商户详情页 → 关键指标预警卡片

**测试步骤**:
1. 访问 /archives/M001（海底捞）
2. 查看"关键指标预警"部分

**预期效果**:
- 🔴 显示"发现X个异常指标"
- 📊 显示多个红色/黄色预警卡片
- ✅ 翻台率1.2次/天（危险）
- ✅ NPS -10（危险）
- ✅ 员工流失率40%（危险）

**验证**: [ ] 通过

---

#### 2. 运营数据趋势图
**位置**: 商户详情页 → 运营趋势分析

**测试步骤**:
1. 访问 /archives/M001
2. 查看"运营趋势分析"部分
3. 切换不同指标（翻台率、NPS等）
4. 切换时间范围（7天/30天/90天）

**预期效果**:
- 📈 显示折线图
- 🔴 红色虚线：预警阈值
- 🟢 绿色虚线：行业平均
- 📊 底部显示趋势分析

**验证**: [ ] 通过

---

#### 3. 同业对比图表
**位置**: 商户详情页 → 同业对比分析

**测试步骤**:
1. 访问 /archives/M001
2. 查看"同业对比分析"部分
3. 切换雷达图/柱状图
4. 查看排名卡片

**预期效果**:
- 🎯 显示3个排名卡片
- 📊 雷达图：紫色vs绿色区域
- 📈 柱状图：显示排名
- ✅ 底部显示优劣势分析

**验证**: [ ] 通过

---

### Phase 2: AI助手功能 ✅

#### 4. 响应格式优化
**位置**: AI助手对话框

**测试步骤**:
1. 打开AI助手
2. 询问："这个月有多少高风险商户？"

**预期效果**:
- ❌ 无Markdown符号（无##, **等）
- ✅ 显示彩色统计卡片
- ✅ 数字突出显示

**验证**: [ ] 通过

---

#### 5. 聚合查询 - 基础统计
**位置**: AI助手对话框

**测试问题**:
1. "这个月有多少高风险商户？" → 预期: 2个
2. "按风险等级统计商户数量" → 预期: 显示饼图

**预期效果**:
- ✅ 返回准确数字
- ✅ 显示统计卡片
- ✅ 分组查询显示饼图

**验证**: [ ] 通过

---

#### 6. 聚合查询 - 平均值计算
**位置**: AI助手对话框

**测试问题**:
1. "所有商户的平均健康度是多少？"
2. "餐饮类商户的平均健康度是多少？"

**预期效果**:
- ✅ 返回平均值
- ✅ 显示统计卡片
- ✅ 有上下文解释

**验证**: [ ] 通过

---

#### 7. 聚合查询 - 对比分析
**位置**: AI助手对话框

**测试问题**:
1. "海底捞和星巴克哪个健康度更高？"
2. "这个月高风险商户比上个月多了几个？"（可能返回"暂无历史数据"）

**预期效果**:
- ✅ 商户间对比正常工作
- ⚠️ 时间对比可能返回"暂无历史数据"（正常）

**验证**: [ ] 通过

---

## 🎯 快速测试流程

### 10分钟快速测试
1. 访问 /archives/M001
2. 从上到下查看所有可视化组件（5分钟）
3. 打开AI助手，测试3个问题（5分钟）
   - "这个月有多少高风险商户？"
   - "所有商户的平均健康度是多少？"
   - "海底捞和星巴克哪个健康度更高？"

### 完整测试（30分钟）
- 按照上述清单逐项测试
- 记录每项测试结果
- 截图保存关键界面

---

## ✅ 测试通过标准

### 必须通过（P0）
- [ ] 关键指标预警显示正常
- [ ] 运营趋势图显示正常
- [ ] 同业对比图显示正常
- [ ] AI助手无Markdown符号
- [ ] 聚合查询返回准确数据

### 应该通过（P1）
- [ ] 所有图表交互正常
- [ ] 所有数据计算准确
- [ ] 视觉效果美观

### 可以失败（P2）
- [ ] 时间对比查询（可能未实现历史数据）

---

## 📝 测试记录模板

```markdown
### 测试记录 - 2026-02-10

#### 关键指标预警
- 结果: ✅通过 / ❌失败
- 观察: [描述]
- 截图: [如有问题]

#### 运营趋势图
- 结果: ✅通过 / ❌失败
- 观察: [描述]

#### 同业对比图
- 结果: ✅通过 / ❌失败
- 观察: [描述]

#### AI助手响应格式
- 结果: ✅通过 / ❌失败
- 观察: [描述]

#### 聚合查询
- 基础统计: ✅通过 / ❌失败
- 平均值计算: ✅通过 / ❌失败
- 对比分析: ✅通过 / ❌失败
```

---

## 🐛 常见问题

### 问题1: 图表不显示
**解决**: 硬刷新页面（Ctrl+Shift+R）

### 问题2: AI助手仍有Markdown符号
**解决**: 清除浏览器缓存，重新加载

### 问题3: 数据不准确
**解决**: 检查localStorage，确认数据已更新

---

## 📞 反馈方式

测试完成后，请告诉我：
1. 哪些功能通过 ✅
2. 哪些功能失败 ❌
3. 有什么建议或问题

---

**准备开始测试！** 🚀
