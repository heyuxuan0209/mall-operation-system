# Mall Operation Agent V1.1
# å•†åœºè¿è¥æ™ºèƒ½ä½“ V1.1

> åŸºäºAIçš„å•†åœºå•†æˆ·å¥åº·åº¦ç›‘æ§ä¸å¸®æ‰¶ç®¡ç†ç³»ç»Ÿ

[![Version](https://img.shields.io/badge/version-1.1-blue.svg)](VERSION.md)
[![Status](https://img.shields.io/badge/status-stable-green.svg)](VERSION.md)
[![Framework](https://img.shields.io/badge/framework-Next.js%2016.1.4-black.svg)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue.svg)](https://www.typescriptlang.org/)

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [æŠ€èƒ½æ¨¡å—](#æŠ€èƒ½æ¨¡å—)
- [ç‰ˆæœ¬å†å²](#ç‰ˆæœ¬å†å²)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

Mall Operation Agent æ˜¯ä¸€ä¸ªæ™ºèƒ½åŒ–çš„å•†åœºè¿è¥ç®¡ç†ç³»ç»Ÿï¼Œä¸“æ³¨äºå•†æˆ·å¥åº·åº¦ç›‘æ§å’Œç²¾å‡†å¸®æ‰¶ã€‚ç³»ç»Ÿé€šè¿‡AIè¯Šæ–­ã€è¶‹åŠ¿é¢„æµ‹ã€çŸ¥è¯†åº“æ²‰æ·€ç­‰åŠŸèƒ½ï¼Œå¸®åŠ©è¿è¥å›¢é˜Ÿæå‡å·¥ä½œæ•ˆç‡ï¼Œå®ç°æ•°æ®é©±åŠ¨çš„ç²¾ç»†åŒ–ç®¡ç†ã€‚

### æ ¸å¿ƒä»·å€¼

- ğŸ¤– **AIæ™ºèƒ½è¯Šæ–­**: è‡ªåŠ¨åˆ†æå•†æˆ·é—®é¢˜ï¼Œæ¨èå¸®æ‰¶ç­–ç•¥
- ğŸ“Š **è¶‹åŠ¿é¢„æµ‹**: åŸºäºçº¿æ€§å›å½’çš„å¥åº·åº¦è¶‹åŠ¿é¢„æµ‹
- ğŸ“š **çŸ¥è¯†æ²‰æ·€**: æˆåŠŸæ¡ˆä¾‹è‡ªåŠ¨æ²‰æ·€ï¼Œç»éªŒå¯å¤ç”¨
- ğŸ”„ **æ ‡å‡†åŒ–æµç¨‹**: å·¥ä½œæµæ¨¡æ¿å¿«é€Ÿåº”ç”¨
- ğŸ” **æ™ºèƒ½æœç´¢**: å¤šå­—æ®µåŠ æƒæœç´¢ï¼Œç²¾å‡†åŒ¹é…

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. å•†æˆ·å¥åº·åº¦ç›‘æ§
- äº”ç»´åº¦å¥åº·åº¦è¯„ä¼°ï¼ˆç§Ÿé‡‘ç¼´çº³ã€ç»è¥è¡¨ç°ã€ç°åœºå“è´¨ã€é¡¾å®¢æ»¡æ„åº¦ã€æŠ—é£é™©èƒ½åŠ›ï¼‰
- å®æ—¶å¥åº·åº¦è¶‹åŠ¿å›¾è¡¨
- çº¿æ€§å›å½’é¢„æµ‹æœªæ¥3ä¸ªæœˆè¶‹åŠ¿
- é£é™©é¢„è­¦ä¸å»ºè®®æªæ–½

### 2. å¸®æ‰¶ä»»åŠ¡ç®¡ç†
- ä»»åŠ¡å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆæªæ–½åˆ¶å®š â†’ æ‰§è¡Œ â†’ è¯„ä¼° â†’ ç»“æ¡ˆï¼‰
- å·¥ä½œæµæ¨¡æ¿å¿«é€Ÿåº”ç”¨
- AIæ™ºèƒ½æ¨èå¸®æ‰¶æªæ–½
- æ‰§è¡Œè®°å½•ä¸æ—¥å¿—è¿½è¸ª

### 3. çŸ¥è¯†åº“æ²‰æ·€
- æˆåŠŸæ¡ˆä¾‹è‡ªåŠ¨æ²‰æ·€
- æ™ºèƒ½æœç´¢ä¸æ¡ˆä¾‹åŒ¹é…
- æŒ‰ä¸šæ€åˆ†ç±»ç®¡ç†
- æ¡ˆä¾‹å¯¼å…¥å¯¼å‡º

### 4. AIè¯Šæ–­ä¸æ¨è
- å•†æˆ·é—®é¢˜æ™ºèƒ½è¯Šæ–­
- çŸ¥è¯†åº“æ¡ˆä¾‹æ™ºèƒ½åŒ¹é…ï¼ˆä¸šæ€40% + æ ‡ç­¾60% + ç—‡çŠ¶åŠ åˆ†ï¼‰
- å¸®æ‰¶ç­–ç•¥è‡ªåŠ¨æ¨è
- é£é™©ç­‰çº§è¯„ä¼°

---

## ğŸ›  æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶
- **Next.js 16.1.4** - Reactæ¡†æ¶ï¼ˆApp Router + Turbopackï¼‰
- **React 19** - UIç»„ä»¶åº“
- **TypeScript 5.x** - ç±»å‹å®‰å…¨

### UIç»„ä»¶
- **Tailwind CSS** - åŸå­åŒ–CSSæ¡†æ¶
- **Font Awesome** - å›¾æ ‡åº“
- **Recharts** - æ•°æ®å¯è§†åŒ–

### çŠ¶æ€ç®¡ç†
- **React Hooks** - useState, useEffect, useMemo, useCallback
- **LocalStorage** - å®¢æˆ·ç«¯æ•°æ®æŒä¹…åŒ–

### å¼€å‘å·¥å…·
- **Turbopack** - é«˜æ€§èƒ½æ‰“åŒ…å·¥å…·
- **ESLint** - ä»£ç è§„èŒƒæ£€æŸ¥

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18.x æˆ–æ›´é«˜ç‰ˆæœ¬
- npm æˆ– yarn æˆ– pnpm

### å®‰è£…ä¾èµ–
```bash
npm install
# æˆ–
yarn install
# æˆ–
pnpm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
# æˆ–
yarn dev
# æˆ–
pnpm dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹åº”ç”¨ã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
npm run start
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
mall-operation-system/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ page.tsx                  # é¦–é¡µï¼ˆæ•°æ®æ¦‚è§ˆï¼‰
â”‚   â”œâ”€â”€ health/                   # å¥åº·ç›‘æ§æ¨¡å—
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ tasks/                    # ä»»åŠ¡ç®¡ç†æ¨¡å—
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ knowledge/                # çŸ¥è¯†åº“æ¨¡å—
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ layout.tsx                # æ ¹å¸ƒå±€
â”‚   â””â”€â”€ globals.css               # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ components/                   # Reactç»„ä»¶
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx           # ä¾§è¾¹æ å¯¼èˆª
â”‚   â”‚   â””â”€â”€ Header.tsx            # é¡¶éƒ¨å¯¼èˆª
â”‚   â”œâ”€â”€ HealthTrendChart.tsx      # å¥åº·åº¦è¶‹åŠ¿å›¾
â”‚   â”œâ”€â”€ WorkflowTemplate.tsx      # å·¥ä½œæµæ¨¡æ¿é€‰æ‹©å™¨
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ utils/                        # å·¥å…·å‡½æ•°åº“ï¼ˆæŠ€èƒ½æ¨¡å—ï¼‰
â”‚   â”œâ”€â”€ smartSearch.ts            # æ™ºèƒ½æœç´¢å¼•æ“
â”‚   â”œâ”€â”€ aiDiagnosis.ts            # AIè¯Šæ–­å¼•æ“
â”‚   â”œâ”€â”€ healthTrendPrediction.ts  # å¥åº·åº¦é¢„æµ‹
â”‚   â”œâ”€â”€ taskStateMachine.ts       # ä»»åŠ¡çŠ¶æ€æœº
â”‚   â””â”€â”€ knowledgeBaseSedimentation.ts  # çŸ¥è¯†åº“æ²‰æ·€
â”‚
â”œâ”€â”€ docs/                         # æ–‡æ¡£
â”‚   â”œâ”€â”€ skills-extraction-summary.md   # æŠ€èƒ½æå–æ€»ç»“
â”‚   â””â”€â”€ react-state-best-practices.md  # Reactæœ€ä½³å®è·µ
â”‚
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”œâ”€â”€ VERSION.md                    # ç‰ˆæœ¬å†å²
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ package.json                  # é¡¹ç›®é…ç½®
â””â”€â”€ tsconfig.json                 # TypeScripté…ç½®
```

---

## ğŸ“ æŠ€èƒ½æ¨¡å—

æœ¬é¡¹ç›®æå–äº†7ä¸ªå¯å¤ç”¨çš„æŠ€èƒ½æ¨¡å—ï¼Œè¯¦è§ [æŠ€èƒ½æå–æ€»ç»“](docs/skills-extraction-summary.md)ã€‚

### P0 - æ ¸å¿ƒæŠ€èƒ½
1. **AI Diagnosis & Recommendation Engine** - AIè¯Šæ–­ä¸æ¨èå¼•æ“
2. **React State Update Best Practices** - ReactçŠ¶æ€æ›´æ–°æœ€ä½³å®è·µ

### P1 - é‡è¦æŠ€èƒ½
3. **Smart Search Engine** - æ™ºèƒ½æœç´¢å¼•æ“
4. **Health Trend Prediction** - å¥åº·åº¦è¶‹åŠ¿é¢„æµ‹
5. **Task State Machine** - ä»»åŠ¡çŠ¶æ€æœº

### P2 - è¾…åŠ©æŠ€èƒ½
6. **Knowledge Base Sedimentation** - çŸ¥è¯†åº“æ²‰æ·€

---

## ğŸ“ ç‰ˆæœ¬å†å²

### V1.1 (2026-01-24) - Current âœ…
- âœ… UI/UXä¼˜åŒ–ï¼ˆçŸ¥è¯†åº“ã€AIè¯Šæ–­ã€è¶‹åŠ¿é¢„æµ‹ï¼‰
- âœ… å…³é”®bugä¿®å¤ï¼ˆå·¥ä½œæµæ¨¡æ¿åº”ç”¨å¤±è´¥ï¼‰
- âœ… æŠ€èƒ½æ¨¡å—æå–ï¼ˆ7ä¸ªå¯å¤ç”¨æ¨¡å—ï¼‰
- âœ… æ–‡æ¡£å®Œå–„

### V1.0 (Previous)
- âœ… åŸºç¡€åŠŸèƒ½å®ç°
- âœ… Sprint 1-3 å®Œæˆï¼ˆ15/15 featuresï¼‰

è¯¦è§ [VERSION.md](VERSION.md)

---

## ğŸ‘¨â€ğŸ’» å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ
- ä½¿ç”¨TypeScriptä¸¥æ ¼æ¨¡å¼
- éµå¾ªESLintè§„åˆ™
- ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ + Hooks
- çŠ¶æ€æ›´æ–°éµå¾ªåŸå­æ€§åŸåˆ™ï¼ˆè§ [Reactæœ€ä½³å®è·µ](docs/react-state-best-practices.md)ï¼‰

### çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ
```typescript
// âœ… æ­£ç¡®ï¼šå•æ¬¡åŸå­æ€§æ›´æ–°
updateTask({
  measures: allMeasures,
  logs: updatedLogs
});

// âŒ é”™è¯¯ï¼šè¿ç»­å¤šæ¬¡æ›´æ–°
updateTask({ measures: allMeasures });
updateTask({ logs: updatedLogs });
```

### ä½¿ç”¨æŠ€èƒ½æ¨¡å—
```typescript
// æ™ºèƒ½æœç´¢
import { createSmartSearchEngine, knowledgeBaseSearchConfig } from '@/utils/smartSearch';
const searchEngine = createSmartSearchEngine(knowledgeBaseSearchConfig);
const results = searchEngine.search('è¥æ”¶ä¸‹æ»‘', knowledgeBase);

// AIè¯Šæ–­
import { generateDiagnosisReport } from '@/utils/aiDiagnosis';
const diagnosis = generateDiagnosisReport(merchant, knowledgeBase);

// å¥åº·åº¦é¢„æµ‹
import { predictHealthTrend } from '@/utils/healthTrendPrediction';
const predictions = predictHealthTrend(historicalData);
```

---

## ğŸ“Š æ•°æ®æ¨¡å‹

### å•†æˆ·æ•°æ® (Merchant)
```typescript
{
  id: string;              // å•†æˆ·ID
  name: string;            // å•†æˆ·åç§°
  category: string;        // ä¸šæ€åˆ†ç±»
  floor: string;           // æ¥¼å±‚
  shopNumber: string;      // é“ºä½å·
  area: number;            // é¢ç§¯(ã¡)
  rent: number;            // æœˆç§Ÿé‡‘
  lastMonthRevenue: number; // ä¸Šæœˆè¥æ”¶
  rentToSalesRatio: number; // ç§Ÿå”®æ¯”
  riskLevel: 'low' | 'medium' | 'high' | 'critical'; // é£é™©ç­‰çº§
  totalScore: number;      // å¥åº·åº¦è¯„åˆ†(0-100)
  metrics: {
    collection: number;     // ç§Ÿé‡‘ç¼´çº³(0-100)
    operational: number;    // ç»è¥è¡¨ç°(0-100)
    siteQuality: number;    // ç°åœºå“è´¨(0-100)
    customerReview: number; // é¡¾å®¢æ»¡æ„åº¦(0-100)
    riskResistance: number; // æŠ—é£é™©èƒ½åŠ›(0-100)
  }
}
```

### å¸®æ‰¶æ¡ˆä¾‹ (Case)
```typescript
{
  id: string;              // æ¡ˆä¾‹ID
  merchantName?: string;   // å•†æˆ·åç§°
  industry: string;        // ä¸šæ€
  tags: string[];          // æ ‡ç­¾
  symptoms: string;        // ç—‡çŠ¶
  diagnosis: string;       // è¯Šæ–­
  strategy: string;        // ç­–ç•¥
  action: string;          // å…·ä½“æªæ–½
  result?: string;         // æ•ˆæœ
  createdAt: string;       // åˆ›å»ºæ—¶é—´
  source?: 'system' | 'user';  // æ¥æº
}
```

---

## ğŸ› å·²çŸ¥é—®é¢˜

æ— 

---

## ğŸ—º è·¯çº¿å›¾

### V1.2 (è®¡åˆ’ä¸­)
- [ ] æ¥å…¥çœŸå®LLM APIï¼ˆClaude APIï¼‰
- [ ] è¯­ä¹‰æœç´¢åŠŸèƒ½
- [ ] å¤šæ¨¡å‹é¢„æµ‹å¯¹æ¯”
- [ ] æ¡ˆä¾‹è´¨é‡è¯„åˆ†

### V2.0 (æœªæ¥)
- [ ] å¤šç§Ÿæˆ·æ”¯æŒ
- [ ] æƒé™ç®¡ç†ç³»ç»Ÿ
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] æ•°æ®å¯¼å‡ºåŠŸèƒ½

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚

---

## ğŸ¤ è´¡çŒ®è€…

- **Claude Sonnet 4.5** - AI Assistant & Developer
- **User** - Product Owner & QA

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ Issue
- å‘é€é‚®ä»¶

---

**Last Updated**: 2026-01-24
**Version**: V1.1
**Status**: Stable âœ…

---

Made with â¤ï¸ by Claude Sonnet 4.5
