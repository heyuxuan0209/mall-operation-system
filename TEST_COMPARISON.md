# 聚合查询测试 - 对比分析

## 测试目标
验证AI助手能否正确处理时间对比查询

---

## 测试用例

### 测试1: 时间对比查询
**输入**: "这个月高风险商户比上个月多了几个？"

**预期结果**:
- ✅ AI理解为对比查询
- ✅ 返回对比结果（增加/减少）
- ✅ 提供趋势分析

**可能的回答**:
1. **如果有历史数据**: "这个月有2个高风险商户，比上个月增加了1个"
2. **如果无历史数据**: "抱歉，系统暂无历史数据，无法进行对比分析"

**验证点**:
- [ ] AI理解对比意图
- [ ] 回答清晰（有数据或说明无数据）
- [ ] 不会答非所问

---

### 测试2: 趋势对比查询
**输入**: "和上个月相比，商户健康度有改善吗？"

**预期结果**:
- ✅ AI理解为趋势对比查询
- ✅ 返回趋势判断（改善/恶化/持平）

**可能的回答**:
1. **如果有历史数据**: "整体健康度有所改善，平均分从75分提升到78分"
2. **如果无历史数据**: "抱歉，系统暂无历史数据，无法进行趋势对比"

**验证点**:
- [ ] AI理解趋势对比意图
- [ ] 回答清晰
- [ ] 不会答非所问

---

### 测试3: 商户间对比
**输入**: "海底捞和星巴克哪个健康度更高？"

**预期结果**:
- ✅ AI理解为商户间对比查询
- ✅ 返回对比结果
- ✅ 提供具体数据

**预期回答**:
"星巴克的健康度更高（88分），海底捞的健康度为45分，相差43分。"

**验证点**:
- [ ] AI理解商户间对比意图
- [ ] 返回准确的对比结果
- [ ] 提供具体分数

---

## 重要说明

### 历史数据状态
当前系统**可能没有实现历史数据存储**，因此：
- 时间对比查询（测试1、2）可能返回"暂无历史数据"
- 这是**正常情况**，不算测试失败
- 重点验证AI是否理解对比意图，而非必须返回对比数据

### 商户间对比
- 商户间对比（测试3）应该能正常工作
- 因为不需要历史数据，只需要当前数据

---

## 测试步骤

1. 访问 http://localhost:3000
2. 点击右下角AI助手图标
3. 依次输入上述测试问题
4. 记录AI回答
5. 验证是否符合预期

---

## 成功标志

### 必须通过（P0）
- ✅ 测试3: 商户间对比正常工作

### 应该通过（P1）
- ✅ 测试1、2: AI理解对比意图（即使返回"暂无历史数据"）

### 可以失败（P2）
- ⚠️ 测试1、2: 返回实际对比数据（可能未实现历史数据）

---

## 预期结果总结

### 最佳情况
- 所有测试都返回准确数据
- 包括时间对比和商户间对比

### 正常情况
- 测试1、2: 返回"暂无历史数据"（功能未实现）
- 测试3: 返回准确的商户间对比数据

### 失败情况
- AI答非所问
- 完全不理解对比意图
- 测试3也无法正常工作

---

**准备测试！**
