# 变更日志

[按时间倒序记录所有版本的变更]

---

## [Unreleased]
[记录已完成但未发布的变更]

### 新增
- [待发布的新功能]

### 修复
- [待发布的Bug修复]

### 变更
- [待发布的变更]

---

## [v3.0] - 2026-XX-XX

### 版本概述
[用2-3句话总结这个版本的核心变化]

### 新增 ✨
[列出所有新增功能，使用清晰的描述]

- **[功能模块名]**: [功能描述]
  - [具体特性1]
  - [具体特性2]
  - [技术细节或重要说明]

- **[另一个功能]**: [功能描述]

### 修复 🐛
[列出所有Bug修复]

- **[Bug名称]**: [问题描述]
  - 问题: [具体问题]
  - 解决: [解决方案]
  - 影响: [修复后的改善]

- **[另一个Bug]**: [简要描述]

### 变更 📝
[列出重大变更，可能影响现有功能]

- **[变更项]**: [变更内容]
  - 之前: [旧行为]
  - 现在: [新行为]
  - 原因: [为什么要变更]

- **[另一个变更]**: [简要描述]

### 优化 ⚡
[性能优化、体验优化等]

- **[优化项]**: [优化内容]
  - 改进前: [数据或状态]
  - 改进后: [数据或状态]
  - 提升: [百分比或具体指标]

### 文档 📚
[文档相关的变更]

- 新增: [新文档名] - [说明]
- 更新: [文档名] - [更新内容]
- 删除: [文档名] - [删除原因]

### 技术债务清理 🔧
[技术债务、代码重构等]

- [重构项1]
- [重构项2]

### 安全 🔒
[安全相关的更新]

- [安全更新1]
- [安全更新2]

### 破坏性变更 ⚠️
[需要用户注意的破坏性变更]

- **[变更描述]**
  - 影响: [受影响的部分]
  - 迁移: [如何迁移]

---

## [v2.0] - 2026-01-28

### 版本概述
现场巡店工具包重大更新，新增AI诊断能力，文档系统全面重构。

### 新增 ✨

- **现场巡店工具包**: 提供完整的现场巡店功能
  - 照片拍摄（支持前置/后置摄像头切换）
  - 语音录制（记录现场问题）
  - 实时预览（照片和录音播放）
  - AI智能诊断（图片+语音分析）
  - 图片自动压缩和存储

- **Skills架构**: 业务逻辑分层设计
  - image-processor: 图片压缩和存储
  - inspection-analyzer: AI诊断引擎
  - notification-builder: 通知生成
  - 支持工具调用和流式输出

- **文档三层金字塔**: 全新文档管理系统
  - CONTEXT.md: 60行快速索引
  - 版本快照: v1.0/v1.1/v2.0快照
  - 12级详细文档分类
  - Token消耗降低87%

### 修复 🐛

- **风险等级一致性**: 统一为5等级标准
  - 问题: 之前3等级、5等级、7等级混用
  - 解决: 统一为5等级（低、中低、中、中高、高）
  - 影响: 所有模块风险等级显示一致

- **数据一致性**: 健康度计算和显示同步
  - 问题: 计算结果和显示不一致
  - 解决: 统一计算逻辑，确保实时同步
  - 影响: 数据准确性提升

- **移动端布局**: 统计卡片尺寸优化
  - 问题: 移动端卡片占用空间过大
  - 解决: 优化卡片布局，减小尺寸
  - 影响: 移动端体验改善

### 变更 📝

- **文档结构重构**:
  - 之前: 29个文档平铺，7282行
  - 现在: 12级分类，4700行
  - 原因: 降低Token消耗，提高查找效率

- **业务逻辑分离**:
  - 之前: 业务逻辑在组件中
  - 现在: 业务逻辑提取到Skills
  - 原因: 提高代码复用性和可维护性

### 优化 ⚡

- **Token消耗**:
  - 改进前: 2400 tokens（首次加载）
  - 改进后: 310 tokens
  - 提升: 降低87%

- **文档查找时间**:
  - 改进前: 2-5分钟
  - 改进后: 10-30秒
  - 提升: 降低90%

- **文档冗余度**:
  - 改进前: 35%
  - 改进后: 5%
  - 提升: 降低86%

### 文档 📚

- 新增: AI开发文档管理终极指南
- 新增: 文档分层管理快速参考
- 新增: Mall Operation Agent实战案例
- 新增: 所有版本快照（v1.0/v1.1/v2.0）
- 新增: 12级详细文档分类

---

## [v1.1] - 2026-01-24

### 版本概述
数据可视化增强，新增趋势预测功能。

### 新增 ✨

- **数据看板可视化**: 多维度数据图表展示
- **环比变化数据**: 显示数据环比变化
- **趋势预测功能**: 基于AI的7日数据预测

### 修复 🐛

- **移动端布局适配**: 优化移动端显示效果

### 优化 ⚡

- **图表渲染性能**: 提升图表加载速度

---

## [v1.0] - 2026-01-20

### 版本概述
项目首次发布，实现核心功能。

### 新增 ✨

- **项目初始化**:
  - Next.js 16 + TypeScript项目搭建
  - Tailwind CSS样式系统
  - LocalStorage数据存储

- **健康度监控**:
  - 5维度健康度评估（销售、客流、转化率、客单价、会员活跃）
  - 风险等级识别（初始3等级）
  - 健康度得分计算

- **任务帮扶中心**:
  - 风险维度任务生成
  - 任务优先级排序
  - 任务完成追踪

- **数据可视化**:
  - 基础数据图表
  - 维度数据展示

---

## 📝 编写说明

### CHANGELOG编写原则

1. **按时间倒序**: 最新版本在最上面
2. **版本格式**: `[版本号] - YYYY-MM-DD`
3. **分类清晰**: 使用新增、修复、变更、优化等分类
4. **描述具体**: 每个变更都要说明做了什么、为什么做、影响是什么
5. **用户视角**: 从用户角度描述变更，而不是技术实现细节
6. **Emoji标记**: 使用emoji让内容更易读（可选）

### 何时更新CHANGELOG？

- ✅ 每次功能开发完成
- ✅ 每次Bug修复
- ✅ 每次重大变更
- ✅ 每次版本发布前整理

### 变更类型说明

| 类型 | Emoji | 何时使用 | 示例 |
|-----|-------|---------|------|
| 新增 | ✨ | 添加新功能 | 新增用户登录功能 |
| 修复 | 🐛 | 修复Bug | 修复登录失败的问题 |
| 变更 | 📝 | 改变现有功能行为 | 修改用户权限判断逻辑 |
| 优化 | ⚡ | 性能优化、体验优化 | 查询速度提升50% |
| 文档 | 📚 | 文档相关变更 | 新增API文档 |
| 重构 | 🔧 | 代码重构、技术债务清理 | 重构用户模块代码 |
| 安全 | 🔒 | 安全相关更新 | 修复XSS漏洞 |
| 破坏性变更 | ⚠️ | 不兼容的变更 | API接口参数变更 |
| 移除 | 🗑️ | 删除功能或代码 | 移除旧版登录接口 |
| 依赖 | 📦 | 依赖更新 | 升级React到18.0 |

### 描述模板

#### 功能新增
```markdown
- **[功能名称]**: [简要描述功能]
  - [具体特性1]
  - [具体特性2]
  - [技术亮点或重要说明]
```

#### Bug修复
```markdown
- **[Bug名称]**: [问题描述]
  - 问题: [具体问题]
  - 解决: [解决方案]
  - 影响: [修复后的改善]
```

#### 性能优化
```markdown
- **[优化项]**: [优化内容]
  - 改进前: [数据或状态]
  - 改进后: [数据或状态]
  - 提升: [百分比或具体指标]
```

### 版本号规范

遵循[语义化版本](https://semver.org/lang/zh-CN/)：

- **主版本号(Major)**: 不兼容的API变更（v1.0 → v2.0）
- **次版本号(Minor)**: 向下兼容的功能新增（v2.0 → v2.1）
- **修订号(Patch)**: 向下兼容的Bug修复（v2.1.0 → v2.1.1）

示例:
- `v1.0.0`: 初始版本
- `v1.1.0`: 新增功能，向下兼容
- `v1.1.1`: Bug修复
- `v2.0.0`: 重大更新，可能不兼容v1.x

---

**模板版本**: v1.0
**创建日期**: 2026-01-28
**参考标准**: [Keep a Changelog](https://keepachangelog.com/zh-CN/)
