# 文档分层管理 - 快速参考卡 📋

**一页纸掌握核心要点** | Token消耗降低87% | 查找时间降低90%

---

## 🎯 核心理念

**三层金字塔**：第一层索引（60行）→ 第二层快照（300行）→ 第三层详细文档（按需）

---

## 📁 文件结构

```
项目根目录/
├── CONTEXT.md                          # 第一层：快速索引（60行，310 tokens）
└── docs/
    ├── snapshots/                      # 第二层：版本快照
    │   ├── v1.0-SNAPSHOT.md           # （200-400行/版本）
    │   ├── v2.0-SNAPSHOT.md
    │   └── v3.0-SNAPSHOT.md
    ├── architecture/                   # 第三层：详细文档
    ├── features/                       # 按12级分类
    ├── api/
    ├── standards/
    ├── releases/
    ├── issues/
    ├── guides/
    ├── planning/
    ├── INDEX.md                        # 文档导航
    └── CHANGELOG.md                    # 变更日志
```

---

## ⚡ 快速创建指南

### Step 1: 创建CONTEXT.md（5分钟）

```markdown
# 项目上下文索引 v[版本]

## 🎯 当前版本状态
- 版本: v2.0
- 最后更新: 2026-01-28
- Git Commit: abc1234
- 工作阶段: 开发中

## 📋 快速链接
- [完整上下文] → docs/snapshots/v2.0-SNAPSHOT.md
- [待办事项] → docs/planning/TODO.md
- [最近变更] → docs/CHANGELOG.md

## 🔧 技术栈
Next.js + TypeScript + Tailwind

## 📊 核心指标
- 总代码: 12000行
- 功能模块: 5个

## 🚀 快速启动
npm run dev

## ⚠️ 当前关注点
- [ ] 待办任务1
- [ ] 待办任务2
```

**验证**: `wc -l CONTEXT.md` < 100行 ✅

---

### Step 2: 创建版本快照（30分钟）

```bash
mkdir -p docs/snapshots
touch docs/snapshots/v2.0-SNAPSHOT.md
```

**内容框架**（200-400行）：
- 版本信息
- 核心变更（相比上一版本）
- 技术栈
- 目录结构（只列关键）
- 核心功能清单（10行）
- 业务规则摘要（20行）
- 已知问题（10行）
- 下一步计划（5行）
- 详细文档索引

**验证**: `wc -l v2.0-SNAPSHOT.md` 200-400行 ✅

---

### Step 3: 创建目录结构（5分钟）

```bash
mkdir -p docs/{architecture,features,api,standards,releases,issues,guides,planning}
```

---

### Step 4: 创建索引文档（15分钟）

**docs/INDEX.md**: 文档导航中心
**docs/CHANGELOG.md**: 版本变更记录

---

## 🚀 日常使用场景

### 场景1: 新AI对话

```
你: "读取 CONTEXT.md 恢复上下文"
AI: [读取，310 tokens，5秒恢复]
你: "继续开发"
```

**效果**: 传统10分钟 → 现在30秒 ⚡

---

### 场景2: 查找信息

```bash
cat docs/INDEX.md          # 找到文档位置
cat docs/features/xxx.md   # 读取具体文档
```

**效果**: 传统5分钟翻找 → 现在10秒定位 ⚡

---

### 场景3: 版本发布

```bash
# 1. 更新CHANGELOG.md（添加新版本记录）
# 2. 创建新版本快照（v3.0-SNAPSHOT.md）
# 3. 更新CONTEXT.md（版本号、日期、链接）
```

---

## 📊 效果对比

| 指标 | 重构前 | 重构后 | 改进 |
|------|--------|--------|------|
| **首次加载Token** | 2400 | 310 | ⬇️ 87% |
| **完整上下文Token** | 12000+ | 1507 | ⬇️ 87% |
| **查找时间** | 2-5分钟 | 10-30秒 | ⬇️ 90% |
| **文档冗余度** | 35% | 5% | ⬇️ 86% |

---

## ✅ 质量检查清单

- [ ] CONTEXT.md < 100行
- [ ] CONTEXT.md Token < 500
- [ ] 每个快照 200-400行
- [ ] 12级目录结构完整
- [ ] INDEX.md已创建
- [ ] CHANGELOG.md已创建
- [ ] 无重复文档
- [ ] 新AI对话能5秒恢复上下文

---

## 🔧 实用工具

### 验证脚本
```bash
# 检查CONTEXT.md行数
wc -l CONTEXT.md

# 估算Token（粗略）
wc -w CONTEXT.md | awk '{print $1 * 1.3}'

# 统计文档总数
find docs -name "*.md" | wc -l
```

---

## 💡 核心原则

1. **极简原则**: CONTEXT.md只保留最核心信息
2. **静态快照**: 版本快照发布后不再修改
3. **避免重复**: 一个概念只有一个权威文档
4. **按需加载**: 详细文档分类存储，需要时才读取
5. **增量更新**: CHANGELOG记录每次变更

---

## 🎯 成功标准

- ✅ CONTEXT.md < 100行
- ✅ 首次加载 < 500 tokens
- ✅ 完整上下文 < 2000 tokens
- ✅ 查找时间 < 1分钟
- ✅ 文档冗余度 < 10%

---

## 📚 延伸阅读

- 完整指南: `AI开发文档管理终极指南.md`
- 实战案例: `case-study-mall-operation.md`
- 模板文件: `templates/` 目录
- 工具脚本: `scripts/` 目录

---

**打印提示**: 建议打印此页作为桌面快速参考
**更新日期**: 2026-01-28
